import{a as we}from"./chunk-4GOZKXGI.js";import{a as ce,c as me,e as ue,h as pe,i as ge,j as _e,m as he}from"./chunk-QX6YC7CB.js";import{a as k}from"./chunk-O6CUJMIQ.js";import{$ as D,A as H,Aa as Z,Ba as T,C as s,Ca as $,D as S,Da as ee,F as _,Fa as te,G as h,H as w,J as V,Ja as ie,Ka as ne,L as W,N as K,Na as re,O as A,Oa as oe,Pa as ae,Qa as se,Ra as le,Sa as de,Y as B,c as P,ca as F,e as b,ga as L,h as u,i as p,k as c,ka as j,l as E,la as z,m as I,ma as G,na as Q,o as x,oa as Y,p as C,pa as N,q as n,r as o,ra as R,s as M,v as U,va as q,w as g,x as m,y as O,ya as J,z as v,za as X}from"./chunk-EAJDEEHR.js";import{a as f,g as a}from"./chunk-2R6CW7ES.js";var Ce=(()=>{class l{constructor(e,i){this.http=e,this.authService=i,this.apiUrl="https://api2.sersim.com.tr/api/Users"}getAuthHeaders(){let e=this.authService.getToken();return new K({Authorization:`Bearer ${e}`})}getUsers(){return this.http.get(this.apiUrl,{headers:this.getAuthHeaders()})}addUser(e){return this.http.post(this.apiUrl,e,{headers:this.getAuthHeaders()})}deleteUser(e){return this.http.delete(`${this.apiUrl}/${e}`,{headers:this.getAuthHeaders()})}updateUser(e,i){return this.http.put(`${this.apiUrl}/${e}`,i,{headers:this.getAuthHeaders()})}static{this.\u0275fac=function(i){return new(i||l)(b(A),b(k))}}static{this.\u0275prov=P({token:l,factory:l.\u0275fac,providedIn:"root"})}}return l})();function xe(l,y){if(l&1){let e=U();n(0,"ion-item-sliding")(1,"ion-item")(2,"ion-label")(3,"h2"),s(4),o(),n(5,"p"),s(6),o()()(),n(7,"ion-item-options",22)(8,"ion-item-option",23)(9,"ion-button",24),g("click",function(){let t=u(e).$implicit,r=m();return p(r.editUser(t))}),M(10,"ion-icon",25),o()(),n(11,"ion-item-option",26)(12,"ion-button",27),g("click",function(){let t=u(e).$implicit,r=m();return p(r.deleteUser(t.id))}),M(13,"ion-icon",28),o()()()()}if(l&2){let e=y.$implicit;c(4),S(e.username),c(2),S(e.role)}}function Ue(l,y){if(l&1){let e=U();n(0,"ion-item-sliding")(1,"ion-item")(2,"ion-label")(3,"h2"),s(4),o(),n(5,"p"),s(6),o()()(),n(7,"ion-item-options",22)(8,"ion-item-option",23)(9,"ion-button",24),g("click",function(){let t=u(e).$implicit,r=m();return p(r.openEditErrorModal(t))}),M(10,"ion-icon",25),o()(),n(11,"ion-item-option",26)(12,"ion-button",27),g("click",function(){let t=u(e).$implicit,r=m();return p(r.deleteErrorCode(t.id))}),M(13,"ion-icon",28),o()()()()}if(l&2){let e=y.$implicit;c(4),S(e.code),c(2),S(e.description)}}function Se(l,y){if(l&1){let e=U();n(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),s(3,"Hata Kodu D\xFCzenle"),o(),n(4,"ion-buttons",22)(5,"ion-button",29),g("click",function(){u(e);let t=m();return p(t.closedErrorModal())}),s(6,"Kapat"),o()()()(),n(7,"ion-content",30)(8,"ion-item")(9,"ion-input",18),w("ngModelChange",function(t){u(e);let r=m();return h(r.selectedError.code,t)||(r.selectedError.code=t),p(t)}),o()(),n(10,"ion-item")(11,"ion-input",19),w("ngModelChange",function(t){u(e);let r=m();return h(r.selectedError.description,t)||(r.selectedError.description=t),p(t)}),o()(),n(12,"ion-button",15),g("click",function(){u(e);let t=m();return p(t.updateErrorCode())}),s(13,"G\xFCncelle"),o()()}if(l&2){let e=m();c(9),_("ngModel",e.selectedError.code),c(2),_("ngModel",e.selectedError.description)}}function ke(l,y){if(l&1){let e=U();n(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),s(3,"Kullan\u0131c\u0131 D\xFCzenle"),o(),n(4,"ion-buttons",22)(5,"ion-button",29),g("click",function(){u(e);let t=m();return p(t.closeEditModal())}),s(6,"Kapat"),o()()()(),n(7,"ion-content",30)(8,"ion-item")(9,"ion-input",9),w("ngModelChange",function(t){u(e);let r=m();return h(r.selectedUser.username,t)||(r.selectedUser.username=t),p(t)}),o()(),n(10,"ion-item")(11,"ion-input",10),w("ngModelChange",function(t){u(e);let r=m();return h(r.selectedUser.passwordHash,t)||(r.selectedUser.passwordHash=t),p(t)}),o()(),n(12,"ion-item")(13,"ion-select",11),w("ngModelChange",function(t){u(e);let r=m();return h(r.selectedUser.role,t)||(r.selectedUser.role=t),p(t)}),n(14,"ion-select-option",12),s(15,"SuperAdmin"),o(),n(16,"ion-select-option",13),s(17,"Admin"),o(),n(18,"ion-select-option",14),s(19,"User"),o()()(),n(20,"ion-button",15),g("click",function(){u(e);let t=m();return p(t.updateUser())}),s(21,"G\xFCncelle"),o()()}if(l&2){let e=m();c(9),_("ngModel",e.selectedUser.username),c(2),_("ngModel",e.selectedUser.passwordHash),c(2),_("ngModel",e.selectedUser.role)}}var Be=(()=>{class l{constructor(e,i,t,r,d,Ee){this.userService=e,this.alertCtrl=i,this.loadingCtrl=t,this.toastController=r,this.authService=d,this.errorCodeService=Ee,this.users=[],this.newUser={username:"",passwordHash:"",role:""},this.isEditModalOpen=!1,this.selectedUser={},this.newErrorCode={code:"",description:""},this.newError={code:"",description:""},this.errorCodes=[],this.selectedError={},this.isEditErrorModalOpen=!1,ce({camera:me,logOutOutline:pe,sendOutline:_e,scanCircleOutline:ge,trash:he,createOutline:ue})}ionViewWillEnter(){return a(this,null,function*(){try{yield Promise.all([this.loadUsers(),this.loadErrorCodes()]),this.presentToast("Veriler Ba\u015Far\u0131yla getirildi!","success"),setTimeout(()=>{let e=this.slidingItems.first;e&&(e.open("end"),setTimeout(()=>{e.close()},1500))},500)}catch(e){console.error("Veriler al\u0131namad\u0131:",e),this.presentToast("Veri getirme hatas\u0131!","danger")}})}loadUsers(){return a(this,null,function*(){let e=yield this.loadingCtrl.create({message:"Y\xFCkleniyor...",spinner:"crescent"});yield e.present(),this.userService.getUsers().subscribe({next:i=>a(this,null,function*(){this.users=i,yield e.dismiss()}),error:i=>a(this,null,function*(){yield e.dismiss(),console.error("Kullan\u0131c\u0131lar al\u0131namad\u0131:",i),this.presentToast("Kullan\u0131c\u0131lar y\xFCklenemedi!","danger")})})})}loadErrorCodes(){return a(this,null,function*(){let e=yield this.loadingCtrl.create({message:"Y\xFCkleniyor...",spinner:"crescent"});yield e.present(),this.errorCodeService.getErrorCodes().subscribe({next:i=>a(this,null,function*(){this.errorCodes=i,yield e.dismiss()}),error:i=>a(this,null,function*(){yield e.dismiss(),console.error("Hata kodlar\u0131 al\u0131namad\u0131:",i),this.presentToast("Hata kodlar\u0131 y\xFCklenemedi!","danger")})})})}addErrorCode(){return a(this,null,function*(){let{code:e,description:i}=this.newErrorCode;if(!e?.trim()||!i?.trim()){this.presentToast("T\xFCm alanlar\u0131 doldurun!","warning");return}let t=yield this.loadingCtrl.create({message:"Hata kodu ekleniyor...",spinner:"crescent"});yield t.present(),this.errorCodeService.createErrorCode({code:e,description:i}).subscribe({next:()=>a(this,null,function*(){yield t.dismiss(),this.presentToast("Hata kodu ba\u015Far\u0131yla eklendi!","success"),this.newErrorCode={code:"",description:""},this.loadErrorCodes()}),error:r=>a(this,null,function*(){yield t.dismiss(),this.presentToast("Hata kodu eklenirken sorun olu\u015Ftu!","danger"),console.error("Hata kodu ekleme hatas\u0131:",r)})})})}deleteErrorCode(e){return a(this,null,function*(){yield(yield this.alertCtrl.create({header:"Silme Onay\u0131",message:"Bu hata kodunu silmek istedi\u011Finize emin misiniz?",buttons:[{text:"\u0130ptal",role:"cancel"},{text:"Sil",handler:()=>a(this,null,function*(){let t=yield this.loadingCtrl.create({message:"Hata kodu siliniyor...",spinner:"crescent"});yield t.present(),this.errorCodeService.deleteErrorCode(e).subscribe({next:()=>a(this,null,function*(){yield t.dismiss(),this.presentToast("Hata kodu silindi!","success"),this.loadErrorCodes()}),error:r=>a(this,null,function*(){yield t.dismiss(),console.error("Hata kodu silme hatas\u0131:",r),this.presentToast("Hata kodu silinirken hata olu\u015Ftu!","danger")})})})}]})).present()})}openErrorModal(e){return a(this,null,function*(){this.selectedError=f({},e),this.isEditErrorModalOpen=!0})}closedErrorModal(){this.isEditErrorModalOpen=!1}openEditErrorModal(e){return a(this,null,function*(){console.log("Edit Error Code:",e),this.selectedError=f({},e),this.isEditErrorModalOpen=!0})}updateErrorCode(){return a(this,null,function*(){let e=yield this.loadingCtrl.create({message:"G\xFCncelleniyor...",spinner:"crescent"});yield e.present(),this.errorCodeService.updateErrorCode(this.selectedError).subscribe({next:()=>a(this,null,function*(){this.isEditErrorModalOpen=!1,this.presentToast("Hata kodu g\xFCncellendi!","success"),e.dismiss(),this.loadErrorCodes()}),error:i=>a(this,null,function*(){yield e.dismiss(),console.error("Hata kodu g\xFCncelleme hatas\u0131:",i),this.presentToast("Hata kodu g\xFCncellenirken sorun olu\u015Ftu!","danger")})}),this.closedErrorModal()})}addUser(){return a(this,null,function*(){if(!this.newUser.username||!this.newUser.passwordHash||!this.newUser.role){this.presentToast("L\xFCtfen t\xFCm alanlar\u0131 doldurun!","warning");return}let e=yield this.loadingCtrl.create({message:"Kullan\u0131c\u0131 ekleniyor...",spinner:"crescent"});yield e.present(),this.userService.addUser(this.newUser).subscribe({next:()=>a(this,null,function*(){this.newUser={username:"",passwordHash:"",role:""},this.presentToast("Kullan\u0131c\u0131 eklendi!","success"),e.dismiss(),this.ionViewWillEnter()}),error:i=>a(this,null,function*(){yield e.dismiss(),console.error("Kullan\u0131c\u0131 ekleme hatas\u0131:",i),this.presentToast("Kullan\u0131c\u0131 eklenirken hata olu\u015Ftu!","danger")})})})}deleteUser(e){return a(this,null,function*(){yield(yield this.alertCtrl.create({header:"Silme Onay\u0131",message:"Bu kullan\u0131c\u0131y\u0131 silmek istedi\u011Finize emin misiniz?",buttons:[{text:"\u0130ptal",role:"cancel"},{text:"Sil",handler:()=>a(this,null,function*(){let t=yield this.loadingCtrl.create({message:"Kullan\u0131c\u0131 siliniyor...",spinner:"crescent"});yield t.present(),this.userService.deleteUser(e).subscribe({next:()=>a(this,null,function*(){console.log("Kullan\u0131c\u0131 silindi:",e),yield t.dismiss(),this.presentToast("Kullan\u0131c\u0131 silindi!","success"),yield this.loadUsers()}),error:r=>a(this,null,function*(){yield t.dismiss(),console.error("Delete error:",r),this.presentToast("Kullan\u0131c\u0131 silinirken hata olu\u015Ftu!","danger")})})})}]})).present()})}openEditModal(e){this.selectedUser=f({},e),this.isEditModalOpen=!0}closeEditModal(){this.isEditModalOpen=!1}editUser(e){this.selectedUser=f({},e),this.selectedUser.passwordHash="",this.isEditModalOpen=!0}updateUser(){return a(this,null,function*(){let e=yield this.loadingCtrl.create({message:"G\xFCncelleniyor...",spinner:"crescent"});yield e.present(),this.userService.updateUser(this.selectedUser.id,this.selectedUser).subscribe({next:()=>a(this,null,function*(){this.isEditModalOpen=!1,this.presentToast("Kullan\u0131c\u0131 g\xFCncellendi!","success"),e.dismiss(),this.ionViewWillEnter()}),error:i=>a(this,null,function*(){yield e.dismiss(),console.error("Kullan\u0131c\u0131 g\xFCncelleme hatas\u0131:",i)})}),this.closeEditModal()})}logout(){return a(this,null,function*(){this.authService.logout()})}presentToast(e,i="success"){return a(this,null,function*(){yield(yield this.toastController.create({message:e,duration:2e3,color:i})).present()})}static{this.\u0275fac=function(i){return new(i||l)(E(Ce),E(re),E(oe),E(ae),E(k),E(we))}}static{this.\u0275cmp=I({type:l,selectors:[["app-user-management"]],viewQuery:function(i,t){if(i&1&&O(T,5),i&2){let r;v(r=H())&&(t.slidingItems=r)}},decls:59,vars:12,consts:[[3,"translucent"],[1,"custom-toolbar"],["slot","start"],["fill","outline",3,"click"],["name","log-out-outline"],[1,"toolbar-logo"],["src","../../assets/icon/sersim-yeni@300x.png",1,"logo"],[1,"ion-padding","content"],["color","warning",1,"title"],["placeholder","Kullan\u0131c\u0131 Ad\u0131",3,"ngModelChange","ngModel"],["placeholder","\u015Eifre",3,"ngModelChange","ngModel"],["placeholder","Rol Se\xE7",3,"ngModelChange","ngModel"],["value","SuperAdmin"],["value","admin"],["value","user"],["expand","full",3,"click"],[3,"inset"],[4,"ngFor","ngForOf"],["placeholder","Hata Kodu",3,"ngModelChange","ngModel"],["placeholder","A\xE7\u0131klama",3,"ngModelChange","ngModel"],[3,"didDismiss","isOpen"],[3,"ionModalDidDismiss","isOpen"],["slot","end"],["color","warning"],["color","warning",3,"click"],["name","create-outline"],["color","danger"],["color","danger",3,"click"],["name","trash"],[3,"click"],[1,"ion-padding"]],template:function(i,t){i&1&&(n(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2)(3,"ion-button",3),g("click",function(){return t.logout()}),M(4,"ion-icon",4),s(5," \xC7\u0131k\u0131\u015F "),o()(),n(6,"div",5),M(7,"img",6),o()()(),n(8,"ion-content",7)(9,"h1",8),s(10,"Admin Panel"),o(),n(11,"ion-card")(12,"ion-card-header")(13,"ion-card-title"),s(14,"Yeni Kullan\u0131c\u0131 Ekle"),o()(),n(15,"ion-card-content")(16,"ion-item")(17,"ion-input",9),w("ngModelChange",function(d){return h(t.newUser.username,d)||(t.newUser.username=d),d}),o()(),n(18,"ion-item")(19,"ion-input",10),w("ngModelChange",function(d){return h(t.newUser.passwordHash,d)||(t.newUser.passwordHash=d),d}),o()(),n(20,"ion-item")(21,"ion-select",11),w("ngModelChange",function(d){return h(t.newUser.role,d)||(t.newUser.role=d),d}),n(22,"ion-select-option",12),s(23,"SuperAdmin"),o(),n(24,"ion-select-option",13),s(25,"Admin"),o(),n(26,"ion-select-option",14),s(27,"User"),o()()(),n(28,"ion-button",15),g("click",function(){return t.addUser()}),s(29,"Ekle"),o()()(),n(30,"ion-card")(31,"ion-card-header")(32,"ion-card-title"),s(33,"Kullan\u0131c\u0131lar"),o()(),n(34,"ion-card-content")(35,"ion-list",16),x(36,xe,14,2,"ion-item-sliding",17),o()()(),n(37,"ion-card")(38,"ion-card-header")(39,"ion-card-title"),s(40,"Yeni Hata Kodu Ekle"),o()(),n(41,"ion-card-content")(42,"ion-item")(43,"ion-input",18),w("ngModelChange",function(d){return h(t.newErrorCode.code,d)||(t.newErrorCode.code=d),d}),o()(),n(44,"ion-item")(45,"ion-input",19),w("ngModelChange",function(d){return h(t.newErrorCode.description,d)||(t.newErrorCode.description=d),d}),o()(),n(46,"ion-button",15),g("click",function(){return t.addErrorCode()}),s(47,"Ekle"),o()()(),n(48,"ion-card")(49,"ion-card-header")(50,"ion-card-title"),s(51,"Hata Kodlar\u0131"),o()(),n(52,"ion-card-content")(53,"ion-list",16),x(54,Ue,14,2,"ion-item-sliding",17),o()()(),n(55,"ion-modal",20),g("didDismiss",function(){return t.closedErrorModal()}),x(56,Se,14,2,"ng-template"),o(),n(57,"ion-modal",21),g("ionModalDidDismiss",function(){return t.closeEditModal()}),x(58,ke,22,3,"ng-template"),o()()),i&2&&(C("translucent",!0),c(17),_("ngModel",t.newUser.username),c(2),_("ngModel",t.newUser.passwordHash),c(2),_("ngModel",t.newUser.role),c(14),C("inset",!0),c(),C("ngForOf",t.users),c(7),_("ngModel",t.newErrorCode.code),c(2),_("ngModel",t.newErrorCode.description),c(8),C("inset",!0),c(),C("ngForOf",t.errorCodes),c(),C("isOpen",t.isEditErrorModalOpen),c(2),C("isOpen",t.isEditModalOpen))},dependencies:[W,V,F,B,D,q,se,ne,z,j,R,G,Y,N,Q,J,le,de,te,ee,X,Z,T,$,L,ie],styles:['@charset "UTF-8";ion-content[_ngcontent-%COMP%]{--background: linear-gradient(to bottom, #525c6c, #605d5d);padding-top:20px}.custom-toolbar[_ngcontent-%COMP%]{box-shadow:0 0 20px #0000001a;position:relative;min-height:56px}.toolbar-logo[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translate(-50%);top:50%;transform:translate(-50%,-50%);display:flex;align-items:center;justify-content:center;z-index:1}.logo[_ngcontent-%COMP%]{max-width:180px;width:100%;height:auto}@media (max-width: 768px){.logo[_ngcontent-%COMP%]{max-width:140px}}@media (max-width: 480px){.logo[_ngcontent-%COMP%]{max-width:110px}}.title[_ngcontent-%COMP%]{text-align:center;font-size:24px;font-weight:600;margin-bottom:20px}ion-content[_ngcontent-%COMP%]{background-color:#f9f9f9;padding-top:20px}ion-card[_ngcontent-%COMP%]{margin-bottom:20px;box-shadow:0 4px 12px #0000001a;border-radius:8px}']})}}return l})();export{Be as a};
