import{a as l,c as m}from"./chunk-ICGK7A2W.js";import{c as s}from"./chunk-FE4SX7GJ.js";import{g as i}from"./chunk-2R6CW7ES.js";var u=class extends s{stopAndHideScanner(){return i(this,null,function*(){console.log(window.OSBarcodeWebScanner),window.OSBarcodeWebScanner&&(yield window.OSBarcodeWebScanner.stop(),window.OSBarcodeWebScanner=null),document.getElementById("cap-os-barcode-scanner-container-dialog").style.display="none"})}buildScannerElement(){if(document.getElementById("cap-os-barcode-scanner-container")){document.getElementById("cap-os-barcode-scanner-container").className="scanner-container-display";return}let n=document.body.appendChild(document.createElement("div"));n.id="cap-os-barcode-scanner-container";let c=document.createElement("div");c.id="cap-os-barcode-scanner-container-dialog",c.className="scanner-dialog";let a=document.createElement("div");a.className="scanner-dialog-inner";let e=document.createElement("span");e.className="close-button",e.innerHTML="&times;",a.appendChild(e);let o=document.createElement("p");o.innerHTML="&nbsp;",a.appendChild(o);let r=document.createElement("div");r.className="scanner-container-full-width",r.id="cap-os-barcode-scanner-container-scanner",a.appendChild(r),c.appendChild(a),n.appendChild(c),e.onclick=this.stopAndHideScanner}scanBarcode(n){return i(this,null,function*(){return this.buildScannerElement(),document.getElementById("cap-os-barcode-scanner-container-dialog").style.display="block",new Promise((c,a)=>{var e,o;let r={facingMode:n.cameraDirection===1?"environment":"user",hasScannerButton:!1,scanButton:n.scanButton===void 0?!1:n.scanButton,showScanLine:!1,scanInstructions:n.scanInstructions?n.scanInstructions:"",orientation:n.scanOrientation?n.scanOrientation:m.PORTRAIT,showCameraSelection:!((e=n.web)===null||e===void 0)&&e.showCameraSelection?n.web.showCameraSelection:!1,typeHint:n.hint===17?void 0:n.hint,scannerFPS:!((o=n.web)===null||o===void 0)&&o.scannerFPS?n.web.scannerFPS:50},d=document.getElementById("cap-os-barcode-scanner-container-scanner");if(!d)throw new Error("Scanner Element is required for web");window.OSBarcodeWebScanner=new l(d.id);let b={fps:r.scannerFPS,qrbox:d.getBoundingClientRect().width*(9/16)-10,aspectRatio:16/9,videoConstraints:{focusMode:"continuous",height:{min:576,ideal:1920},deviceId:void 0,facingMode:void 0}},S=(t,f)=>{this.stopAndHideScanner(),c({ScanResult:t})},p=t=>{t.indexOf("NotFoundException")===-1&&t.indexOf("No barcode or QR code detected")===-1&&(this.stopAndHideScanner(),console.error(`[Scanner Web Error] ${t}`),a(t))};window.OSBarcodeWebScanner.start({facingMode:r.facingMode},b,S,p)})})}};export{u as CapacitorBarcodeScannerWeb};
