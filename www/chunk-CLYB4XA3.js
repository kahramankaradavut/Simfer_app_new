import{a as le,b as se}from"./chunk-XBZFFGUJ.js";import"./chunk-6LPY2D2P.js";import{a as re,f as ae}from"./chunk-QX6YC7CB.js";import{Aa as J,B as v,Ba as Q,C as r,Ca as X,D as m,Da as Z,F as T,G as k,Ga as ee,H as I,I as F,Ia as te,J as M,K as O,L as V,Ma as ne,Na as ie,Qa as oe,X as D,_ as L,b as y,ba as z,fa as H,ga as j,h as u,i as x,ia as B,j as w,k as l,ka as K,l as h,la as $,m as S,ma as A,na as N,o as f,oa as U,p as d,pa as W,q as n,r as i,s as C,sa as Y,t as P,ta as G,u as E,ua as q,v as b,w as _,wa as R,x as p}from"./chunk-7VL3YQPG.js";import"./chunk-43IKT4CI.js";import"./chunk-AEXNBF67.js";import"./chunk-ICLE6RHT.js";import"./chunk-ZG4R76UU.js";import"./chunk-DAQ5FXCF.js";import"./chunk-FUGLTCJS.js";import"./chunk-4WFVMWDK.js";import"./chunk-24GYF5IA.js";import"./chunk-NMYJD6OP.js";import"./chunk-C5RQ2IC2.js";import"./chunk-7D2EH4XU.js";import"./chunk-MMIXVVWR.js";import"./chunk-SV7S5NYR.js";import{g as c}from"./chunk-2R6CW7ES.js";function ce(a,g){if(a&1){let e=b();n(0,"ion-col",35)(1,"ion-card",36),_("click",function(){let t=u(e).$implicit,s=p(3);return x(s.openPhoto(t.filePath))}),C(2,"ion-img",37),i()()}if(a&2){let e=g.$implicit;l(2),d("src",e.filePath)}}function de(a,g){if(a&1){let e=b();n(0,"ion-card",12)(1,"ion-card-header",13)(2,"ion-card-title"),r(3,"Form Bilgileri"),i()(),n(4,"ion-card-content")(5,"ion-list")(6,"ion-item",14)(7,"ion-label"),r(8,"\xDCr\xFCn Kodu:"),i(),n(9,"ion-label",15),r(10),i()(),n(11,"ion-item",16)(12,"ion-label"),r(13,"\xDCr\xFCn T\xFCr\xFC:"),i(),n(14,"ion-label",15),r(15),i()(),n(16,"ion-item",17)(17,"ion-label"),r(18,"Hata Kodu:"),i(),n(19,"ion-label",15),r(20),i()(),n(21,"ion-item",18)(22,"ion-label"),r(23,"Hata A\xE7\u0131klamas\u0131:"),i(),n(24,"ion-label",15),r(25),i()(),n(26,"ion-item",19)(27,"ion-label"),r(28,"Detayl\u0131 Hata Bilgisi:"),i(),n(29,"ion-label",15),r(30),i()(),n(31,"ion-item",20)(32,"ion-label"),r(33,"Hata Miktar\u0131:"),i(),n(34,"ion-label",15),r(35),i()(),n(36,"ion-item",21)(37,"ion-label"),r(38,"\xDCretim Hatt\u0131:"),i(),n(39,"ion-label",15),r(40),i()(),n(41,"ion-item",22)(42,"ion-label"),r(43,"Tespit Eden Ki\u015Fi:"),i(),n(44,"ion-label",15),r(45),i()(),n(46,"ion-item",23)(47,"ion-label"),r(48,"Durum:"),i(),n(49,"ion-select",24),I("ngModelChange",function(t){let s=u(e).$implicit;return k(s.status,t)||(s.status=t),x(t)}),n(50,"ion-select-option",25),r(51,"\u0130\u015Flem Yap\u0131lmad\u0131"),i(),n(52,"ion-select-option",26),r(53,"Onar\u0131ld\u0131"),i(),n(54,"ion-select-option",27),r(55,"Hurda"),i()(),n(56,"ion-button",28),_("click",function(){let t=u(e).$implicit,s=p(2);return x(s.updateFormStatus(t))}),r(57," Durumu G\xFCncelle "),i()()(),n(58,"ion-accordion-group")(59,"ion-accordion",29)(60,"ion-item",30)(61,"ion-label"),r(62,"Foto\u011Fraflar:"),i()(),n(63,"div",31)(64,"ion-grid",32)(65,"ion-row"),f(66,ce,3,1,"ion-col",33),i()()()()(),n(67,"ion-button",34),_("click",function(){let t=u(e).$implicit,s=p(2);return x(s.deleteForm(t.id))}),r(68," Formu Sil "),i()()()}if(a&2){let e=g.$implicit;l(10),m(e.code),l(5),m(e.type),l(5),m(e.errorCode.code),l(5),m(e.errorCode.description),l(5),m(e.productError),l(5),m(e.quantity),l(5),m(e.band),l(5),m(e.name),l(4),T("ngModel",e.status),l(17),d("ngForOf",e.photos)}}function me(a,g){if(a&1&&(P(0),f(1,de,69,10,"ion-card",11),E()),a&2){let e=p();l(),d("ngForOf",e.forms)}}function pe(a,g){if(a&1&&(n(0,"ion-text")(1,"a",38),r(2,"\u{1F4E5} Excel Dosyas\u0131n\u0131 \u0130ndir"),i()()),a&2){let e=p();l(),d("href",e.excelExportLink,w)}}function ge(a,g){a&1&&(n(0,"ion-card")(1,"ion-card-content",39),r(2," Hen\xFCz incelenmi\u015F bir \xFCr\xFCn bulunmamaktad\u0131r. "),i()())}function ue(a,g){if(a&1){let e=b();n(0,"div",40),_("click",function(){u(e);let t=p();return x(t.closePhoto())}),C(1,"img",41),i()}if(a&2){let e=p();l(),d("src",e.selectedPhoto,w)}}var ke=(()=>{class a{constructor(e,o,t,s){this.formService=e,this.loadingCtrl=o,this.toastController=t,this.tourService=s,this.selectedPhoto=null,this.excelExportLink=null,this.forms=[],re({downloadOutline:ae})}presentToast(e,o="success"){return c(this,null,function*(){yield(yield this.toastController.create({message:e,duration:2e3,color:o})).present()})}ionViewWillEnter(){return c(this,null,function*(){let e=yield this.loadingCtrl.create({message:"Veriler getiriliyor...",spinner:"crescent"});yield e.present();try{this.formService.getForms().subscribe(t=>{this.forms=t}),this.presentToast("Veri ba\u015Far\u0131yla getirildi!","success")}catch(t){console.error("Veriler al\u0131namad\u0131:",t),this.presentToast("Veri getirme hatas\u0131: "+(t.message||"Bilinmeyen hata"),"danger")}finally{yield e.dismiss()}let o=localStorage.getItem("username");if(o){let t=`formTourShown2_${o}`;console.log("Tour Key:",t),localStorage.getItem(t)||setTimeout(()=>{this.tourService.startTourFormList(),localStorage.setItem(t,"true")},500)}})}openPhoto(e){this.selectedPhoto=e}closePhoto(){this.selectedPhoto=null}updateFormStatus(e){return c(this,null,function*(){let o=yield this.loadingCtrl.create({message:"Durum g\xFCncelleniyor...",spinner:"crescent"});yield o.present(),this.formService.updateFormStatus(e.id,e.status).subscribe({next:()=>c(this,null,function*(){yield o.dismiss(),this.presentToast("Durum ba\u015Far\u0131yla g\xFCncellendi.","success")}),error:t=>c(this,null,function*(){console.error("Durum g\xFCncellenemedi:",t),yield o.dismiss(),this.presentToast("Yetkiniz yok!","danger")})})})}getExportLink(){return c(this,null,function*(){this.excelExportLink=null;let e=yield this.loadingCtrl.create({message:"Link al\u0131n\u0131yor...",spinner:"crescent"});yield e.present(),this.formService.getExcelExportLink().subscribe({next:o=>c(this,null,function*(){yield e.dismiss(),this.excelExportLink=o.fileUrl,this.presentToast("Link ba\u015Far\u0131yla al\u0131nd\u0131!","success")}),error:o=>c(this,null,function*(){console.error("Link al\u0131namad\u0131",o),yield e.dismiss(),this.presentToast("Link al\u0131namad\u0131!","danger")})})})}deleteForm(e){return c(this,null,function*(){let o=yield this.loadingCtrl.create({message:"Siliniyor...",spinner:"circles"});yield o.present();try{yield y(this.formService.deleteForm(e)),this.forms=this.forms.filter(t=>t.id!==e),yield o.dismiss(),this.presentToast("Form ba\u015Far\u0131yla silindi.","success")}catch(t){console.error("Form silinemedi:",t),yield o.dismiss(),this.presentToast("Yetkiniz yok!","danger")}})}clearDatabase(){return c(this,null,function*(){let e=yield this.loadingCtrl.create({message:"Siliniyor...",spinner:"circles"});yield e.present(),this.formService.clearData().subscribe({next:()=>c(this,null,function*(){yield e.dismiss(),this.presentToast("Form ba\u015Far\u0131yla silindi.","success")}),error:o=>c(this,null,function*(){console.error("Veritaban\u0131 temizlenemedi:",o),yield e.dismiss(),this.presentToast("Yetkiniz yok!","danger")})})})}static{this.\u0275fac=function(o){return new(o||a)(h(le),h(ne),h(ie),h(se))}}static{this.\u0275cmp=S({type:a,selectors:[["app-tab2"]],decls:14,vars:5,consts:[["noData",""],[3,"translucent"],[1,"custom-toolbar"],[1,"toolbar-logo"],["src","../../assets/icon/sersim-yeni@300x.png",1,"logo"],[1,"ion-padding","content"],[1,"title"],[4,"ngIf","ngIfElse"],["expand","block","color","primary",1,"excel-tab2",3,"click"],[4,"ngIf"],["class","photo-popup",3,"click",4,"ngIf"],["class","info-card",4,"ngFor","ngForOf"],[1,"info-card"],[1,"form-list"],[1,"code-tab2"],["slot","end"],[1,"type-tab2"],[1,"error-tab2"],[1,"desc-tab2"],[1,"detail-tab2"],[1,"quantity-tab2"],[1,"band-tab2"],[1,"person-tab2"],[1,"status-tab2"],[3,"ngModelChange","ngModel"],["value","i\u015Flem yap\u0131lmad\u0131"],["value","Onar\u0131ld\u0131"],["value","hurda"],["expand","block",3,"click"],["value","photos"],["slot","header",1,"photo-tab2"],["slot","content",1,"ion-padding"],[1,"photo-grid"],["size","6","size-md","3",4,"ngFor","ngForOf"],["color","danger","fill","outline","expand","block",1,"delete-tab2",3,"click"],["size","6","size-md","3"],[1,"photo-card",3,"click"],[1,"card-img",3,"src"],["target","_blank","download","",3,"href"],[1,"ion-text-center"],[1,"photo-popup",3,"click"],[1,"popup-image",3,"src"]],template:function(o,t){if(o&1){let s=b();n(0,"ion-header",1)(1,"ion-toolbar",2)(2,"div",3),C(3,"img",4),i()()(),n(4,"ion-content",5)(5,"h1",6),r(6,"\u0130ncelenen \xDCr\xFCnler"),i(),f(7,me,2,1,"ng-container",7),n(8,"ion-button",8),_("click",function(){return u(s),x(t.getExportLink())}),r(9,"Excel Linkini Al"),i(),f(10,pe,3,1,"ion-text",9)(11,ge,3,0,"ng-template",null,0,F)(13,ue,2,1,"div",10),i()}if(o&2){let s=v(12);d("translucent",!0),l(7),d("ngIf",t.forms&&t.forms.length>0)("ngIfElse",s),l(3),d("ngIf",t.excelExportLink),l(3),d("ngIf",t.selectedPhoto)}},dependencies:[z,D,L,G,Q,te,W,K,A,N,$,Y,X,U,V,M,O,q,H,j,R,J,B,ee,Z,oe],styles:['@charset "UTF-8";ion-content[_ngcontent-%COMP%]{--background: linear-gradient(to bottom, #525c6c, #605d5d);padding-top:20px}.custom-toolbar[_ngcontent-%COMP%]{box-shadow:0 0 20px #0000001a;position:relative;min-height:56px}.toolbar-logo[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translate(-50%);top:50%;transform:translate(-50%,-50%);display:flex;align-items:center;justify-content:center;z-index:1}.logo[_ngcontent-%COMP%]{max-width:180px;width:100%;height:auto}@media (max-width: 768px){.logo[_ngcontent-%COMP%]{max-width:140px}}@media (max-width: 480px){.logo[_ngcontent-%COMP%]{max-width:110px}}.title[_ngcontent-%COMP%]{text-align:center;font-size:24px;font-weight:600;margin-bottom:20px}ion-content[_ngcontent-%COMP%]{background-color:#f9f9f9;padding-top:20px}ion-title[_ngcontent-%COMP%]{text-align:center;color:#3e4b5b;font-size:24px;font-weight:600;margin-bottom:20px}ion-card[_ngcontent-%COMP%]{margin-bottom:20px;box-shadow:0 4px 12px #0000001a;border-radius:8px}ion-card-content[_ngcontent-%COMP%]{margin-top:20px}.info-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{--background: linear-gradient(to right, #3b83f69b, #6365f194);color:#fff}.info-card[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-weight:700}.photo-grid[_ngcontent-%COMP%]{margin-top:30px}ion-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}ion-col[_ngcontent-%COMP%]{display:flex;justify-content:center}.photo-card[_ngcontent-%COMP%]{box-shadow:0 4px 8px #0000001a;border-radius:10px;overflow:hidden;margin-bottom:20px;transition:transform .3s ease,box-shadow .3s ease}.photo-card[_ngcontent-%COMP%]:hover{transform:scale(1.03);box-shadow:0 6px 15px #0003}.card-img[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%}.photo-popup[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#000000b3;display:flex;align-items:center;justify-content:center;z-index:1000;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.popup-image[_ngcontent-%COMP%]{max-width:90vw;max-height:90vh;border-radius:10px;box-shadow:0 4px 10px #00000080;transition:transform .3s ease-in-out}@media (max-width: 600px){ion-card[_ngcontent-%COMP%]{margin-bottom:15px}.photo-card[_ngcontent-%COMP%]{margin-bottom:10px}.photo-card[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:150px;height:150px}.card-img[_ngcontent-%COMP%]{width:150px;height:150px}}']})}}return a})();export{ke as Tab2Page};
