import{a as Ce}from"./chunk-MXVL4SAU.js";import{a as b}from"./chunk-2CDHGK7T.js";import{a as me,c as ue,e as pe,h as ge,i as _e,j as he,m as we}from"./chunk-QX6YC7CB.js";import{A as v,Aa as ee,Ba as te,C as s,D as k,Da as ie,F as w,G as C,H as E,Ha as ne,Ia as re,J as W,L as K,La as oe,Ma as ae,N as A,Na as se,O as B,Oa as le,Pa as de,Qa as ce,X as D,_ as F,ba as L,c as I,e as T,ea as j,h as g,i as _,ia as z,ja as G,k as d,ka as Q,l as y,la as Y,m as O,ma as N,na as R,o as U,p as M,pa as q,q as n,r,s as f,ta as J,v as S,w as h,wa as X,x as p,xa as Z,y as H,ya as $,z as V,za as P}from"./chunk-ZMLCJ3KU.js";import{a as x,h as o}from"./chunk-LNJ3S2LQ.js";var Ee=(()=>{let c=class c{constructor(e,t){this.http=e,this.authService=t,this.apiUrl="https://api2.sersim.com.tr/api/Users"}getAuthHeaders(){let e=this.authService.getToken();return new A({Authorization:`Bearer ${e}`})}getUsers(){return this.http.get(this.apiUrl,{headers:this.getAuthHeaders()})}addUser(e){return this.http.post(this.apiUrl,e,{headers:this.getAuthHeaders()})}deleteUser(e){return this.http.delete(`${this.apiUrl}/${e}`,{headers:this.getAuthHeaders()})}updateUser(e,t){return this.http.put(`${this.apiUrl}/${e}`,t,{headers:this.getAuthHeaders()})}};c.\u0275fac=function(t){return new(t||c)(T(B),T(b))},c.\u0275prov=I({token:c,factory:c.\u0275fac,providedIn:"root"});let u=c;return u})();function Ue(u,c){if(u&1){let a=S();n(0,"ion-item-sliding")(1,"ion-item")(2,"ion-label")(3,"h2"),s(4),r(),n(5,"p"),s(6),r()()(),n(7,"ion-item-options",22)(8,"ion-item-option",23)(9,"ion-button",24),h("click",function(){let t=g(a).$implicit,i=p();return _(i.editUser(t))}),f(10,"ion-icon",25),r()(),n(11,"ion-item-option",26)(12,"ion-button",27),h("click",function(){let t=g(a).$implicit,i=p();return _(i.deleteUser(t.id))}),f(13,"ion-icon",28),r()()()()}if(u&2){let a=c.$implicit;d(4),k(a.username),d(2),k(a.role)}}function Se(u,c){if(u&1){let a=S();n(0,"ion-item-sliding")(1,"ion-item")(2,"ion-label")(3,"h2"),s(4),r(),n(5,"p"),s(6),r()()(),n(7,"ion-item-options",22)(8,"ion-item-option",23)(9,"ion-button",24),h("click",function(){let t=g(a).$implicit,i=p();return _(i.openEditErrorModal(t))}),f(10,"ion-icon",25),r()(),n(11,"ion-item-option",26)(12,"ion-button",27),h("click",function(){let t=g(a).$implicit,i=p();return _(i.deleteErrorCode(t.id))}),f(13,"ion-icon",28),r()()()()}if(u&2){let a=c.$implicit;d(4),k(a.code),d(2),k(a.description)}}function ke(u,c){if(u&1){let a=S();n(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),s(3,"Hata Kodu D\xFCzenle"),r(),n(4,"ion-buttons",22)(5,"ion-button",29),h("click",function(){g(a);let t=p();return _(t.closedErrorModal())}),s(6,"Kapat"),r()()()(),n(7,"ion-content",30)(8,"ion-item")(9,"ion-input",18),E("ngModelChange",function(t){g(a);let i=p();return C(i.selectedError.code,t)||(i.selectedError.code=t),_(t)}),r()(),n(10,"ion-item")(11,"ion-input",19),E("ngModelChange",function(t){g(a);let i=p();return C(i.selectedError.description,t)||(i.selectedError.description=t),_(t)}),r()(),n(12,"ion-button",15),h("click",function(){g(a);let t=p();return _(t.updateErrorCode())}),s(13,"G\xFCncelle"),r()()}if(u&2){let a=p();d(9),w("ngModel",a.selectedError.code),d(2),w("ngModel",a.selectedError.description)}}function be(u,c){if(u&1){let a=S();n(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),s(3,"Kullan\u0131c\u0131 D\xFCzenle"),r(),n(4,"ion-buttons",22)(5,"ion-button",29),h("click",function(){g(a);let t=p();return _(t.closeEditModal())}),s(6,"Kapat"),r()()()(),n(7,"ion-content",30)(8,"ion-item")(9,"ion-input",9),E("ngModelChange",function(t){g(a);let i=p();return C(i.selectedUser.username,t)||(i.selectedUser.username=t),_(t)}),r()(),n(10,"ion-item")(11,"ion-input",10),E("ngModelChange",function(t){g(a);let i=p();return C(i.selectedUser.passwordHash,t)||(i.selectedUser.passwordHash=t),_(t)}),r()(),n(12,"ion-item")(13,"ion-select",11),E("ngModelChange",function(t){g(a);let i=p();return C(i.selectedUser.role,t)||(i.selectedUser.role=t),_(t)}),n(14,"ion-select-option",12),s(15,"SuperAdmin"),r(),n(16,"ion-select-option",13),s(17,"Admin"),r(),n(18,"ion-select-option",14),s(19,"User"),r()()(),n(20,"ion-button",15),h("click",function(){g(a);let t=p();return _(t.updateUser())}),s(21,"G\xFCncelle"),r()()}if(u&2){let a=p();d(9),w("ngModel",a.selectedUser.username),d(2),w("ngModel",a.selectedUser.passwordHash),d(2),w("ngModel",a.selectedUser.role)}}var De=(()=>{let c=class c{constructor(e,t,i,m,l,Me){this.userService=e,this.alertCtrl=t,this.loadingCtrl=i,this.toastController=m,this.authService=l,this.errorCodeService=Me,this.users=[],this.newUser={username:"",passwordHash:"",role:""},this.isEditModalOpen=!1,this.selectedUser={},this.newErrorCode={code:"",description:""},this.newError={code:"",description:""},this.errorCodes=[],this.selectedError={},this.isEditErrorModalOpen=!1,me({camera:ue,logOutOutline:ge,sendOutline:he,scanCircleOutline:_e,trash:we,createOutline:pe})}ionViewWillEnter(){return o(this,null,function*(){try{yield Promise.all([this.loadUsers(),this.loadErrorCodes()]),this.presentToast("Veriler Ba\u015Far\u0131yla getirildi!","success"),setTimeout(()=>{let e=this.slidingItems.first;e&&(e.open("end"),setTimeout(()=>{e.close()},1500))},500)}catch(e){console.error("Veriler al\u0131namad\u0131:",e),this.presentToast("Veri getirme hatas\u0131!","danger")}})}loadUsers(){return o(this,null,function*(){let e=yield this.loadingCtrl.create({message:"Y\xFCkleniyor...",spinner:"crescent"});yield e.present(),this.userService.getUsers().subscribe({next:t=>o(this,null,function*(){this.users=t,yield e.dismiss()}),error:t=>o(this,null,function*(){yield e.dismiss(),console.error("Kullan\u0131c\u0131lar al\u0131namad\u0131:",t),this.presentToast("Kullan\u0131c\u0131lar y\xFCklenemedi!","danger")})})})}loadErrorCodes(){return o(this,null,function*(){let e=yield this.loadingCtrl.create({message:"Y\xFCkleniyor...",spinner:"crescent"});yield e.present(),this.errorCodeService.getErrorCodes().subscribe({next:t=>o(this,null,function*(){this.errorCodes=t,yield e.dismiss()}),error:t=>o(this,null,function*(){yield e.dismiss(),console.error("Hata kodlar\u0131 al\u0131namad\u0131:",t),this.presentToast("Hata kodlar\u0131 y\xFCklenemedi!","danger")})})})}addErrorCode(){return o(this,null,function*(){let{code:e,description:t}=this.newErrorCode;if(!(e!=null&&e.trim())||!(t!=null&&t.trim())){this.presentToast("T\xFCm alanlar\u0131 doldurun!","warning");return}let i=yield this.loadingCtrl.create({message:"Hata kodu ekleniyor...",spinner:"crescent"});yield i.present(),this.errorCodeService.createErrorCode({code:e,description:t}).subscribe({next:()=>o(this,null,function*(){yield i.dismiss(),this.presentToast("Hata kodu ba\u015Far\u0131yla eklendi!","success"),this.newErrorCode={code:"",description:""},this.loadErrorCodes()}),error:m=>o(this,null,function*(){yield i.dismiss(),this.presentToast("Hata kodu eklenirken sorun olu\u015Ftu!","danger"),console.error("Hata kodu ekleme hatas\u0131:",m)})})})}deleteErrorCode(e){return o(this,null,function*(){yield(yield this.alertCtrl.create({header:"Silme Onay\u0131",message:"Bu hata kodunu silmek istedi\u011Finize emin misiniz?",buttons:[{text:"\u0130ptal",role:"cancel"},{text:"Sil",handler:()=>o(this,null,function*(){let i=yield this.loadingCtrl.create({message:"Hata kodu siliniyor...",spinner:"crescent"});yield i.present(),this.errorCodeService.deleteErrorCode(e).subscribe({next:()=>o(this,null,function*(){yield i.dismiss(),this.presentToast("Hata kodu silindi!","success"),this.loadErrorCodes()}),error:m=>o(this,null,function*(){yield i.dismiss(),console.error("Hata kodu silme hatas\u0131:",m),this.presentToast("Hata kodu silinirken hata olu\u015Ftu!","danger")})})})}]})).present()})}openErrorModal(e){return o(this,null,function*(){this.selectedError=x({},e),this.isEditErrorModalOpen=!0})}closedErrorModal(){this.isEditErrorModalOpen=!1}openEditErrorModal(e){return o(this,null,function*(){console.log("Edit Error Code:",e),this.selectedError=x({},e),this.isEditErrorModalOpen=!0})}updateErrorCode(){return o(this,null,function*(){let e=yield this.loadingCtrl.create({message:"G\xFCncelleniyor...",spinner:"crescent"});yield e.present(),this.errorCodeService.updateErrorCode(this.selectedError).subscribe({next:()=>o(this,null,function*(){this.isEditErrorModalOpen=!1,this.presentToast("Hata kodu g\xFCncellendi!","success"),e.dismiss(),this.loadErrorCodes()}),error:t=>o(this,null,function*(){yield e.dismiss(),console.error("Hata kodu g\xFCncelleme hatas\u0131:",t),this.presentToast("Hata kodu g\xFCncellenirken sorun olu\u015Ftu!","danger")})}),this.closedErrorModal()})}addUser(){return o(this,null,function*(){if(!this.newUser.username||!this.newUser.passwordHash||!this.newUser.role){this.presentToast("L\xFCtfen t\xFCm alanlar\u0131 doldurun!","warning");return}let e=yield this.loadingCtrl.create({message:"Kullan\u0131c\u0131 ekleniyor...",spinner:"crescent"});yield e.present(),this.userService.addUser(this.newUser).subscribe({next:()=>o(this,null,function*(){this.newUser={username:"",passwordHash:"",role:""},this.presentToast("Kullan\u0131c\u0131 eklendi!","success"),e.dismiss(),this.ionViewWillEnter()}),error:t=>o(this,null,function*(){yield e.dismiss(),console.error("Kullan\u0131c\u0131 ekleme hatas\u0131:",t),this.presentToast("Kullan\u0131c\u0131 eklenirken hata olu\u015Ftu!","danger")})})})}deleteUser(e){return o(this,null,function*(){yield(yield this.alertCtrl.create({header:"Silme Onay\u0131",message:"Bu kullan\u0131c\u0131y\u0131 silmek istedi\u011Finize emin misiniz?",buttons:[{text:"\u0130ptal",role:"cancel"},{text:"Sil",handler:()=>o(this,null,function*(){let i=yield this.loadingCtrl.create({message:"Kullan\u0131c\u0131 siliniyor...",spinner:"crescent"});yield i.present(),this.userService.deleteUser(e).subscribe({next:()=>o(this,null,function*(){console.log("Kullan\u0131c\u0131 silindi:",e),yield i.dismiss(),this.presentToast("Kullan\u0131c\u0131 silindi!","success"),yield this.loadUsers()}),error:m=>o(this,null,function*(){yield i.dismiss(),console.error("Delete error:",m),this.presentToast("Kullan\u0131c\u0131 silinirken hata olu\u015Ftu!","danger")})})})}]})).present()})}openEditModal(e){this.selectedUser=x({},e),this.isEditModalOpen=!0}closeEditModal(){this.isEditModalOpen=!1}editUser(e){this.selectedUser=x({},e),this.selectedUser.passwordHash="",this.isEditModalOpen=!0}updateUser(){return o(this,null,function*(){let e=yield this.loadingCtrl.create({message:"G\xFCncelleniyor...",spinner:"crescent"});yield e.present(),this.userService.updateUser(this.selectedUser.id,this.selectedUser).subscribe({next:()=>o(this,null,function*(){this.isEditModalOpen=!1,this.presentToast("Kullan\u0131c\u0131 g\xFCncellendi!","success"),e.dismiss(),this.ionViewWillEnter()}),error:t=>o(this,null,function*(){yield e.dismiss(),console.error("Kullan\u0131c\u0131 g\xFCncelleme hatas\u0131:",t)})}),this.closeEditModal()})}logout(){return o(this,null,function*(){this.authService.logout()})}presentToast(e,t="success"){return o(this,null,function*(){yield(yield this.toastController.create({message:e,duration:2e3,color:t})).present()})}};c.\u0275fac=function(t){return new(t||c)(y(Ee),y(oe),y(ae),y(se),y(b),y(Ce))},c.\u0275cmp=O({type:c,selectors:[["app-user-management"]],viewQuery:function(t,i){if(t&1&&H(P,5),t&2){let m;V(m=v())&&(i.slidingItems=m)}},decls:59,vars:12,consts:[[3,"translucent"],[1,"custom-toolbar"],["slot","start"],["fill","outline",3,"click"],["name","log-out-outline"],[1,"toolbar-logo"],["src","../../assets/icon/sersim-yeni@300x.png",1,"logo"],[1,"ion-padding","content"],["color","warning",1,"title"],["placeholder","Kullan\u0131c\u0131 Ad\u0131",3,"ngModelChange","ngModel"],["placeholder","\u015Eifre",3,"ngModelChange","ngModel"],["placeholder","Rol Se\xE7",3,"ngModelChange","ngModel"],["value","SuperAdmin"],["value","admin"],["value","user"],["expand","full",3,"click"],[3,"inset"],[4,"ngFor","ngForOf"],["placeholder","Hata Kodu",3,"ngModelChange","ngModel"],["placeholder","A\xE7\u0131klama",3,"ngModelChange","ngModel"],[3,"didDismiss","isOpen"],[3,"ionModalDidDismiss","isOpen"],["slot","end"],["color","warning"],["color","warning",3,"click"],["name","create-outline"],["color","danger"],["color","danger",3,"click"],["name","trash"],[3,"click"],[1,"ion-padding"]],template:function(t,i){t&1&&(n(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2)(3,"ion-button",3),h("click",function(){return i.logout()}),f(4,"ion-icon",4),s(5," \xC7\u0131k\u0131\u015F "),r()(),n(6,"div",5),f(7,"img",6),r()()(),n(8,"ion-content",7)(9,"h1",8),s(10,"Admin Panel"),r(),n(11,"ion-card")(12,"ion-card-header")(13,"ion-card-title"),s(14,"Yeni Kullan\u0131c\u0131 Ekle"),r()(),n(15,"ion-card-content")(16,"ion-item")(17,"ion-input",9),E("ngModelChange",function(l){return C(i.newUser.username,l)||(i.newUser.username=l),l}),r()(),n(18,"ion-item")(19,"ion-input",10),E("ngModelChange",function(l){return C(i.newUser.passwordHash,l)||(i.newUser.passwordHash=l),l}),r()(),n(20,"ion-item")(21,"ion-select",11),E("ngModelChange",function(l){return C(i.newUser.role,l)||(i.newUser.role=l),l}),n(22,"ion-select-option",12),s(23,"SuperAdmin"),r(),n(24,"ion-select-option",13),s(25,"Admin"),r(),n(26,"ion-select-option",14),s(27,"User"),r()()(),n(28,"ion-button",15),h("click",function(){return i.addUser()}),s(29,"Ekle"),r()()(),n(30,"ion-card")(31,"ion-card-header")(32,"ion-card-title"),s(33,"Kullan\u0131c\u0131lar"),r()(),n(34,"ion-card-content")(35,"ion-list",16),U(36,Ue,14,2,"ion-item-sliding",17),r()()(),n(37,"ion-card")(38,"ion-card-header")(39,"ion-card-title"),s(40,"Yeni Hata Kodu Ekle"),r()(),n(41,"ion-card-content")(42,"ion-item")(43,"ion-input",18),E("ngModelChange",function(l){return C(i.newErrorCode.code,l)||(i.newErrorCode.code=l),l}),r()(),n(44,"ion-item")(45,"ion-input",19),E("ngModelChange",function(l){return C(i.newErrorCode.description,l)||(i.newErrorCode.description=l),l}),r()(),n(46,"ion-button",15),h("click",function(){return i.addErrorCode()}),s(47,"Ekle"),r()()(),n(48,"ion-card")(49,"ion-card-header")(50,"ion-card-title"),s(51,"Hata Kodlar\u0131"),r()(),n(52,"ion-card-content")(53,"ion-list",16),U(54,Se,14,2,"ion-item-sliding",17),r()()(),n(55,"ion-modal",20),h("didDismiss",function(){return i.closedErrorModal()}),U(56,ke,14,2,"ng-template"),r(),n(57,"ion-modal",21),h("ionModalDidDismiss",function(){return i.closeEditModal()}),U(58,be,22,3,"ng-template"),r()()),t&2&&(M("translucent",!0),d(17),w("ngModel",i.newUser.username),d(2),w("ngModel",i.newUser.passwordHash),d(2),w("ngModel",i.newUser.role),d(14),M("inset",!0),d(),M("ngForOf",i.users),d(7),w("ngModel",i.newErrorCode.code),d(2),w("ngModel",i.newErrorCode.description),d(8),M("inset",!0),d(),M("ngForOf",i.errorCodes),d(),M("isOpen",i.isEditErrorModalOpen),d(2),M("isOpen",i.isEditModalOpen))},dependencies:[K,W,L,D,F,J,le,re,G,z,q,Q,N,R,Y,X,de,ce,ie,te,Z,$,P,ee,j,ne],styles:['@charset "UTF-8";ion-content[_ngcontent-%COMP%]{--background: linear-gradient(to bottom, #525c6c, #605d5d);padding-top:20px}.custom-toolbar[_ngcontent-%COMP%]{box-shadow:0 0 20px #0000001a;position:relative;min-height:56px}.toolbar-logo[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translate(-50%);top:50%;transform:translate(-50%,-50%);display:flex;align-items:center;justify-content:center;z-index:1}.logo[_ngcontent-%COMP%]{max-width:180px;width:100%;height:auto}@media (max-width: 768px){.logo[_ngcontent-%COMP%]{max-width:140px}}@media (max-width: 480px){.logo[_ngcontent-%COMP%]{max-width:110px}}.title[_ngcontent-%COMP%]{text-align:center;font-size:24px;font-weight:600;margin-bottom:20px}ion-content[_ngcontent-%COMP%]{background-color:#f9f9f9;padding-top:20px}ion-card[_ngcontent-%COMP%]{margin-bottom:20px;box-shadow:0 4px 12px #0000001a;border-radius:8px}']});let u=c;return u})();export{De as a};
