import{a as se,b as ce}from"./chunk-5QJLTO3N.js";import"./chunk-2CDHGK7T.js";import{a as ae,f as le}from"./chunk-QX6YC7CB.js";import{Aa as Q,B as T,Ba as X,C as r,Ca as Z,D as p,Da as ee,F as k,G as I,Ga as te,H as F,I as M,Ia as ne,J as O,K as V,L as D,Ma as ie,Na as oe,Qa as re,X as L,_ as z,b as S,ba as H,fa as j,ga as B,h as u,i as x,ia as K,j as y,k as s,ka as $,l as f,la as A,m as E,ma as N,na as U,o as b,oa as W,p as m,pa as Y,q as t,r as n,s as w,sa as G,t as v,ta as q,u as P,ua as R,v as C,w as h,wa as J,x as g}from"./chunk-ZMLCJ3KU.js";import"./chunk-NBTCUQ3W.js";import"./chunk-F73I76IP.js";import"./chunk-7X6I3LK6.js";import"./chunk-RH7BGMYO.js";import"./chunk-XW3MSMGP.js";import"./chunk-KVP5425T.js";import"./chunk-4U6PRYVA.js";import"./chunk-KH562ESH.js";import"./chunk-JWIEPCRG.js";import"./chunk-C5RQ2IC2.js";import"./chunk-D4VGNZLR.js";import"./chunk-JHLW7V75.js";import"./chunk-SV7S5NYR.js";import{h as d}from"./chunk-LNJ3S2LQ.js";function de(l,c){if(l&1){let a=C();t(0,"ion-col",35)(1,"ion-card",36),h("click",function(){let e=u(a).$implicit,i=g(3);return x(i.openPhoto(e.filePath))}),w(2,"ion-img",37),n()()}if(l&2){let a=c.$implicit;s(2),m("src",a.filePath)}}function me(l,c){if(l&1){let a=C();t(0,"ion-card",12)(1,"ion-card-header",13)(2,"ion-card-title"),r(3,"Form Bilgileri"),n()(),t(4,"ion-card-content")(5,"ion-list")(6,"ion-item",14)(7,"ion-label"),r(8,"\xDCr\xFCn Kodu:"),n(),t(9,"ion-label",15),r(10),n()(),t(11,"ion-item",16)(12,"ion-label"),r(13,"\xDCr\xFCn T\xFCr\xFC:"),n(),t(14,"ion-label",15),r(15),n()(),t(16,"ion-item",17)(17,"ion-label"),r(18,"Hata Kodu:"),n(),t(19,"ion-label",15),r(20),n()(),t(21,"ion-item",18)(22,"ion-label"),r(23,"Hata A\xE7\u0131klamas\u0131:"),n(),t(24,"ion-label",15),r(25),n()(),t(26,"ion-item",19)(27,"ion-label"),r(28,"Detayl\u0131 Hata Bilgisi:"),n(),t(29,"ion-label",15),r(30),n()(),t(31,"ion-item",20)(32,"ion-label"),r(33,"Hata Miktar\u0131:"),n(),t(34,"ion-label",15),r(35),n()(),t(36,"ion-item",21)(37,"ion-label"),r(38,"\xDCretim Hatt\u0131:"),n(),t(39,"ion-label",15),r(40),n()(),t(41,"ion-item",22)(42,"ion-label"),r(43,"Tespit Eden Ki\u015Fi:"),n(),t(44,"ion-label",15),r(45),n()(),t(46,"ion-item",23)(47,"ion-label"),r(48,"Durum:"),n(),t(49,"ion-select",24),F("ngModelChange",function(e){let i=u(a).$implicit;return I(i.status,e)||(i.status=e),x(e)}),t(50,"ion-select-option",25),r(51,"\u0130\u015Flem Yap\u0131lmad\u0131"),n(),t(52,"ion-select-option",26),r(53,"Onar\u0131ld\u0131"),n(),t(54,"ion-select-option",27),r(55,"Hurda"),n()(),t(56,"ion-button",28),h("click",function(){let e=u(a).$implicit,i=g(2);return x(i.updateFormStatus(e))}),r(57," Durumu G\xFCncelle "),n()()(),t(58,"ion-accordion-group")(59,"ion-accordion",29)(60,"ion-item",30)(61,"ion-label"),r(62,"Foto\u011Fraflar:"),n()(),t(63,"div",31)(64,"ion-grid",32)(65,"ion-row"),b(66,de,3,1,"ion-col",33),n()()()()(),t(67,"ion-button",34),h("click",function(){let e=u(a).$implicit,i=g(2);return x(i.deleteForm(e.id))}),r(68," Formu Sil "),n()()()}if(l&2){let a=c.$implicit;s(10),p(a.code),s(5),p(a.type),s(5),p(a.errorCode.code),s(5),p(a.errorCode.description),s(5),p(a.productError),s(5),p(a.quantity),s(5),p(a.band),s(5),p(a.name),s(4),k("ngModel",a.status),s(17),m("ngForOf",a.photos)}}function pe(l,c){if(l&1&&(v(0),b(1,me,69,10,"ion-card",11),P()),l&2){let a=g();s(),m("ngForOf",a.forms)}}function ge(l,c){if(l&1&&(t(0,"ion-text")(1,"a",38),r(2,"\u{1F4E5} Excel Dosyas\u0131n\u0131 \u0130ndir"),n()()),l&2){let a=g();s(),m("href",a.excelExportLink,y)}}function ue(l,c){l&1&&(t(0,"ion-card")(1,"ion-card-content",39),r(2," Hen\xFCz incelenmi\u015F bir \xFCr\xFCn bulunmamaktad\u0131r. "),n()())}function xe(l,c){if(l&1){let a=C();t(0,"div",40),h("click",function(){u(a);let e=g();return x(e.closePhoto())}),w(1,"img",41),n()}if(l&2){let a=g();s(),m("src",a.selectedPhoto,y)}}var Ie=(()=>{let c=class c{constructor(o,e,i,_){this.formService=o,this.loadingCtrl=e,this.toastController=i,this.tourService=_,this.selectedPhoto=null,this.excelExportLink=null,this.forms=[],ae({downloadOutline:le})}presentToast(o,e="success"){return d(this,null,function*(){yield(yield this.toastController.create({message:o,duration:2e3,color:e})).present()})}ionViewWillEnter(){return d(this,null,function*(){let o=yield this.loadingCtrl.create({message:"Veriler getiriliyor...",spinner:"crescent"});yield o.present();try{this.formService.getForms().subscribe(i=>{this.forms=i}),this.presentToast("Veri ba\u015Far\u0131yla getirildi!","success")}catch(i){console.error("Veriler al\u0131namad\u0131:",i),this.presentToast("Veri getirme hatas\u0131: "+(i.message||"Bilinmeyen hata"),"danger")}finally{yield o.dismiss()}let e=localStorage.getItem("username");if(e){let i=`formTourShown2_${e}`;console.log("Tour Key:",i),localStorage.getItem(i)||setTimeout(()=>{this.tourService.startTourFormList(),localStorage.setItem(i,"true")},500)}})}openPhoto(o){this.selectedPhoto=o}closePhoto(){this.selectedPhoto=null}updateFormStatus(o){return d(this,null,function*(){let e=yield this.loadingCtrl.create({message:"Durum g\xFCncelleniyor...",spinner:"crescent"});yield e.present(),this.formService.updateFormStatus(o.id,o.status).subscribe({next:()=>d(this,null,function*(){yield e.dismiss(),this.presentToast("Durum ba\u015Far\u0131yla g\xFCncellendi.","success")}),error:i=>d(this,null,function*(){console.error("Durum g\xFCncellenemedi:",i),yield e.dismiss(),this.presentToast("Yetkiniz yok!","danger")})})})}getExportLink(){return d(this,null,function*(){this.excelExportLink=null;let o=yield this.loadingCtrl.create({message:"Link al\u0131n\u0131yor...",spinner:"crescent"});yield o.present(),this.formService.getExcelExportLink().subscribe({next:e=>d(this,null,function*(){yield o.dismiss(),this.excelExportLink=e.fileUrl,this.presentToast("Link ba\u015Far\u0131yla al\u0131nd\u0131!","success")}),error:e=>d(this,null,function*(){console.error("Link al\u0131namad\u0131",e),yield o.dismiss(),this.presentToast("Link al\u0131namad\u0131!","danger")})})})}deleteForm(o){return d(this,null,function*(){let e=yield this.loadingCtrl.create({message:"Siliniyor...",spinner:"circles"});yield e.present();try{yield S(this.formService.deleteForm(o)),this.forms=this.forms.filter(i=>i.id!==o),yield e.dismiss(),this.presentToast("Form ba\u015Far\u0131yla silindi.","success")}catch(i){console.error("Form silinemedi:",i),yield e.dismiss(),this.presentToast("Yetkiniz yok!","danger")}})}clearDatabase(){return d(this,null,function*(){let o=yield this.loadingCtrl.create({message:"Siliniyor...",spinner:"circles"});yield o.present(),this.formService.clearData().subscribe({next:()=>d(this,null,function*(){yield o.dismiss(),this.presentToast("Form ba\u015Far\u0131yla silindi.","success")}),error:e=>d(this,null,function*(){console.error("Veritaban\u0131 temizlenemedi:",e),yield o.dismiss(),this.presentToast("Yetkiniz yok!","danger")})})})}};c.\u0275fac=function(e){return new(e||c)(f(se),f(ie),f(oe),f(ce))},c.\u0275cmp=E({type:c,selectors:[["app-tab2"]],decls:14,vars:5,consts:[["noData",""],[3,"translucent"],[1,"custom-toolbar"],[1,"toolbar-logo"],["src","../../assets/icon/sersim-yeni@300x.png",1,"logo"],[1,"ion-padding","content"],[1,"title"],[4,"ngIf","ngIfElse"],["expand","block","color","primary",1,"excel-tab2",3,"click"],[4,"ngIf"],["class","photo-popup",3,"click",4,"ngIf"],["class","info-card",4,"ngFor","ngForOf"],[1,"info-card"],[1,"form-list"],[1,"code-tab2"],["slot","end"],[1,"type-tab2"],[1,"error-tab2"],[1,"desc-tab2"],[1,"detail-tab2"],[1,"quantity-tab2"],[1,"band-tab2"],[1,"person-tab2"],[1,"status-tab2"],[3,"ngModelChange","ngModel"],["value","i\u015Flem yap\u0131lmad\u0131"],["value","Onar\u0131ld\u0131"],["value","hurda"],["expand","block",3,"click"],["value","photos"],["slot","header",1,"photo-tab2"],["slot","content",1,"ion-padding"],[1,"photo-grid"],["size","6","size-md","3",4,"ngFor","ngForOf"],["color","danger","fill","outline","expand","block",1,"delete-tab2",3,"click"],["size","6","size-md","3"],[1,"photo-card",3,"click"],[1,"card-img",3,"src"],["target","_blank","download","",3,"href"],[1,"ion-text-center"],[1,"photo-popup",3,"click"],[1,"popup-image",3,"src"]],template:function(e,i){if(e&1){let _=C();t(0,"ion-header",1)(1,"ion-toolbar",2)(2,"div",3),w(3,"img",4),n()()(),t(4,"ion-content",5)(5,"h1",6),r(6,"\u0130ncelenen \xDCr\xFCnler"),n(),b(7,pe,2,1,"ng-container",7),t(8,"ion-button",8),h("click",function(){return u(_),x(i.getExportLink())}),r(9,"Excel Linkini Al"),n(),b(10,ge,3,1,"ion-text",9)(11,ue,3,0,"ng-template",null,0,M)(13,xe,2,1,"div",10),n()}if(e&2){let _=T(12);m("translucent",!0),s(7),m("ngIf",i.forms&&i.forms.length>0)("ngIfElse",_),s(3),m("ngIf",i.excelExportLink),s(3),m("ngIf",i.selectedPhoto)}},dependencies:[H,L,z,q,X,ne,Y,$,N,U,A,G,Z,W,D,O,V,R,j,B,J,Q,K,te,ee,re],styles:['@charset "UTF-8";ion-content[_ngcontent-%COMP%]{--background: linear-gradient(to bottom, #525c6c, #605d5d);padding-top:20px}.custom-toolbar[_ngcontent-%COMP%]{box-shadow:0 0 20px #0000001a;position:relative;min-height:56px}.toolbar-logo[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translate(-50%);top:50%;transform:translate(-50%,-50%);display:flex;align-items:center;justify-content:center;z-index:1}.logo[_ngcontent-%COMP%]{max-width:180px;width:100%;height:auto}@media (max-width: 768px){.logo[_ngcontent-%COMP%]{max-width:140px}}@media (max-width: 480px){.logo[_ngcontent-%COMP%]{max-width:110px}}.title[_ngcontent-%COMP%]{text-align:center;font-size:24px;font-weight:600;margin-bottom:20px}ion-content[_ngcontent-%COMP%]{background-color:#f9f9f9;padding-top:20px}ion-title[_ngcontent-%COMP%]{text-align:center;color:#3e4b5b;font-size:24px;font-weight:600;margin-bottom:20px}ion-card[_ngcontent-%COMP%]{margin-bottom:20px;box-shadow:0 4px 12px #0000001a;border-radius:8px}ion-card-content[_ngcontent-%COMP%]{margin-top:20px}.info-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{--background: linear-gradient(to right, #3b83f69b, #6365f194);color:#fff}.info-card[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-weight:700}.photo-grid[_ngcontent-%COMP%]{margin-top:30px}ion-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}ion-col[_ngcontent-%COMP%]{display:flex;justify-content:center}.photo-card[_ngcontent-%COMP%]{box-shadow:0 4px 8px #0000001a;border-radius:10px;overflow:hidden;margin-bottom:20px;transition:transform .3s ease,box-shadow .3s ease}.photo-card[_ngcontent-%COMP%]:hover{transform:scale(1.03);box-shadow:0 6px 15px #0003}.card-img[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%}.photo-popup[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#000000b3;display:flex;align-items:center;justify-content:center;z-index:1000;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.popup-image[_ngcontent-%COMP%]{max-width:90vw;max-height:90vh;border-radius:10px;box-shadow:0 4px 10px #00000080;transition:transform .3s ease-in-out}@media (max-width: 600px){ion-card[_ngcontent-%COMP%]{margin-bottom:15px}.photo-card[_ngcontent-%COMP%]{margin-bottom:10px}.photo-card[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:150px;height:150px}.card-img[_ngcontent-%COMP%]{width:150px;height:150px}}']});let l=c;return l})();export{Ie as Tab2Page};
